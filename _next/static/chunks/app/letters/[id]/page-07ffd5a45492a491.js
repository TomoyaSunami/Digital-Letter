(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[67],{2955:function(e,t,n){Promise.resolve().then(n.bind(n,7117))},9369:function(e,t,n){"use strict";n.d(t,{TransitionLink:function(){return u}});var r=n(7437),i=n(7648),s=n(8101);function u(e){let{href:t,onClick:n,...u}=e,{startTransition:a}=(0,s.C)();return(0,r.jsx)(i.default,{...u,href:t,onClick:e=>{null==n||n(e),e.defaultPrevented||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey||0!==e.button||"_blank"===u.target||(e.preventDefault(),a(t))}})}},8101:function(e,t,n){"use strict";n.d(t,{TransitionOutlet:function(){return d},TransitionProvider:function(){return o},C:function(){return c}});var r=n(7437),i=n(2265),s=n(9376),u=n(1994);function a(e){let{children:t,phase:n,duration:i=800}=e;return(0,r.jsx)("div",{className:(0,u.Z)("page-transition","in"===n?"page-transition-in":"page-transition-out"),style:{"--transition-duration":"".concat(i,"ms")},children:t})}let l=(0,i.createContext)(void 0);function c(){let e=(0,i.useContext)(l);if(!e)throw Error("usePageTransition must be used within TransitionProvider");return e}function o(e){let{children:t}=e,n=(0,s.useRouter)(),u=(0,s.usePathname)(),[a,c]=(0,i.useState)("in"),[o,d]=(0,i.useState)(!1),m=(0,i.useRef)(null),h=(0,i.useRef)(null),x=(0,i.useRef)(null),f=e=>{e.current&&(clearTimeout(e.current),e.current=null)};(0,i.useEffect)(()=>()=>{f(h),f(x)},[]),(0,i.useEffect)(()=>{o&&m.current&&u===m.current&&(m.current=null,c("in"),f(x),x.current=setTimeout(()=>{d(!1)},800))},[u,o]);let p=(0,i.useCallback)(e=>{if(!e||e===u||o){e&&e!==u&&!o&&n.push(e);return}m.current=e,d(!0),c("out"),f(h),h.current=setTimeout(()=>{n.push(e)},800)},[u,o,n]),g=(0,i.useMemo)(()=>({startTransition:p,isTransitioning:o,phase:a}),[p,o,a]);return(0,r.jsx)(l.Provider,{value:g,children:t})}function d(e){let{children:t}=e,{phase:n}=c();return(0,r.jsx)(a,{phase:n,duration:800,children:t})}},7117:function(e,t,n){"use strict";n.d(t,{LetterViewer:function(){return c}});var r=n(7437),i=n(1994),s=n(2265),u=n(1524),a=n(9369);let l={simple:"letter-theme-simple text-ink",night:"letter-theme-night",japanese:"letter-theme-japanese text-accent-warm"};function c(e){var t;let{letter:n}=e,[c,o]=(0,s.useState)("DELIVERED"===n.status);return(0,r.jsxs)("div",{className:"mt-6 space-y-6",children:[c?(0,r.jsxs)("div",{className:"rounded-3xl border border-line-paper p-8 shadow-inner ".concat(l[n.theme]),children:[(0,r.jsxs)("p",{className:(0,i.Z)("text-sm uppercase tracking-[0.3em]","night"===n.theme?"text-white/70":"text-ink-muted/80"),children:[n.from," ➝ ",n.to]}),(0,r.jsx)("h2",{className:(0,i.Z)("mt-2 text-2xl font-semibold","night"===n.theme?"text-white":"text-ink"),children:n.title}),(0,r.jsx)("p",{className:(0,i.Z)("handwriting mt-6 text-lg leading-relaxed","night"===n.theme?"text-letter-night-text":"text-ink"),children:n.body}),(0,r.jsx)("p",{className:(0,i.Z)("mt-6 text-right text-sm","night"===n.theme?"text-white/70":"text-ink-muted"),children:(0,u.F)(null!==(t=n.deliveredAt)&&void 0!==t?t:n.scheduledAt)})]}):(0,r.jsxs)("div",{className:"flex flex-col items-center gap-4 rounded-3xl border border-dashed border-line-paper bg-paper-soft px-8 py-10 text-center",children:[(0,r.jsx)("div",{className:"text-6xl","aria-hidden":!0,children:"DELIVERED"===n.status?"\uD83D\uDC8C":"\uD83D\uDCEE"}),(0,r.jsx)("p",{className:"text-lg text-ink-muted",children:"封筒をタップして中身を開いてみましょう。"}),(0,r.jsx)("button",{type:"button",onClick:()=>o(!0),className:"button-primary",children:"封筒を開ける"})]}),(0,r.jsxs)("div",{className:"flex flex-col gap-3 md:flex-row",children:[(0,r.jsx)(a.TransitionLink,{href:"/compose",className:"button-primary md:flex-1",children:"返信を書く"}),(0,r.jsx)(a.TransitionLink,{href:"/letters",className:"button-secondary md:flex-1",children:"手紙箱に戻る"})]})]})}},1524:function(e,t,n){"use strict";n.d(t,{F:function(){return i}});let r=new Intl.DateTimeFormat("ja-JP",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});function i(e){if(!e)return"";let t=new Date(e.replace(" ","T"));return Number.isNaN(t.getTime())?e:r.format(t)}}},function(e){e.O(0,[339,971,117,744],function(){return e(e.s=2955)}),_N_E=e.O()}]);